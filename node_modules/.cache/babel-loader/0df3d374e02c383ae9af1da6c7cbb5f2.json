{"ast":null,"code":"var _s = $RefreshSig$(),\n    _s2 = $RefreshSig$(),\n    _s3 = $RefreshSig$();\n\nimport { useCallback } from 'react';\nimport { useWallet } from '@binance-chain/bsc-use-wallet';\nimport { ethers } from 'ethers';\nimport { useDispatch } from 'react-redux';\nimport { fetchFarmUserDataAsync } from 'state/actions';\nimport { approve } from 'utils/callHelpers';\nimport { useMasterchef, useCake, useLottery } from './useContract'; // Approve a Farm\n\nexport const useApprove = lpContract => {\n  _s();\n\n  console.log('here::::');\n  const dispatch = useDispatch();\n  const {\n    account\n  } = useWallet();\n  const masterChefContract = useMasterchef();\n  const handleApprove = useCallback(async () => {\n    try {\n      console.log('middle');\n      const tx = await approve(lpContract, masterChefContract, account);\n      dispatch(fetchFarmUserDataAsync(account));\n      return tx;\n    } catch (e) {\n      return false;\n    }\n  }, [account, dispatch, lpContract, masterChefContract]);\n  console.log('end');\n  return {\n    onApprove: handleApprove\n  };\n}; // Approve a Pool\n// export const useSousApprove = (lpContract: Contract, sousId) => {\n//   const dispatch = useDispatch()\n//   const { account }: { account: string } = useWallet()\n//   const sousChefContract = useSousChef(sousId)\n//   const handleApprove = useCallback(async () => {\n//     try {\n//       const tx = await approve(lpContract, sousChefContract, account)\n//       dispatch(updateUserAllowance(sousId, account))\n//       return tx\n//     } catch (e) {\n//       return false\n//     }\n//   }, [account, dispatch, lpContract, sousChefContract, sousId])\n//   return { onApprove: handleApprove }\n// }\n// Approve the lottery\n\n_s(useApprove, \"912YkJ6AGYumCBnuye56mVxNDwo=\", false, function () {\n  return [useDispatch, useWallet, useMasterchef];\n});\n\nexport const useLotteryApprove = () => {\n  _s2();\n\n  const {\n    account\n  } = useWallet();\n  const cakeContract = useCake();\n  const lotteryContract = useLottery();\n  const handleApprove = useCallback(async () => {\n    try {\n      const tx = await approve(cakeContract, lotteryContract, account);\n      return tx;\n    } catch (e) {\n      return false;\n    }\n  }, [account, cakeContract, lotteryContract]);\n  return {\n    onApprove: handleApprove\n  };\n}; // Approve an IFO\n\n_s2(useLotteryApprove, \"qmmDwizDBCPS/KQkbYFMkBrCi+A=\", false, function () {\n  return [useWallet, useCake, useLottery];\n});\n\nexport const useIfoApprove = (tokenContract, spenderAddress) => {\n  _s3();\n\n  const {\n    account\n  } = useWallet();\n  const onApprove = useCallback(async () => {\n    try {\n      const tx = await tokenContract.methods.approve(spenderAddress, ethers.constants.MaxUint256).send({\n        from: account\n      });\n      return tx;\n    } catch {\n      return false;\n    }\n  }, [account, spenderAddress, tokenContract]);\n  return onApprove;\n};\n\n_s3(useIfoApprove, \"5YEWPx3HiFEhK5UYbT6NzOlDPbw=\", false, function () {\n  return [useWallet];\n});","map":{"version":3,"sources":["/home/waleed/lileswapfarms/src/hooks/useApprove.ts"],"names":["useCallback","useWallet","ethers","useDispatch","fetchFarmUserDataAsync","approve","useMasterchef","useCake","useLottery","useApprove","lpContract","console","log","dispatch","account","masterChefContract","handleApprove","tx","e","onApprove","useLotteryApprove","cakeContract","lotteryContract","useIfoApprove","tokenContract","spenderAddress","methods","constants","MaxUint256","send","from"],"mappings":"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","sourcesContent":["import { useCallback } from 'react'\nimport { useWallet } from '@binance-chain/bsc-use-wallet'\nimport { Contract } from 'web3-eth-contract'\nimport { ethers } from 'ethers'\nimport { useDispatch } from 'react-redux'\nimport {fetchFarmUserDataAsync } from 'state/actions'\nimport { approve } from 'utils/callHelpers'\nimport { useMasterchef, useCake, useLottery } from './useContract'\n\n// Approve a Farm\nexport const useApprove = (lpContract: Contract) => {\n  console.log('here::::')\n  const dispatch = useDispatch()\n  const { account }: { account: string } = useWallet()\n  const masterChefContract = useMasterchef()\n\n  const handleApprove = useCallback(async () => {\n    try {\n      console.log('middle')\n      const tx = await approve(lpContract, masterChefContract, account)\n      dispatch(fetchFarmUserDataAsync(account))\n      return tx\n    } catch (e) {\n      return false\n    }\n  }, [account, dispatch, lpContract, masterChefContract])\n  console.log('end')\n  return { onApprove: handleApprove }\n}\n\n// Approve a Pool\n// export const useSousApprove = (lpContract: Contract, sousId) => {\n//   const dispatch = useDispatch()\n//   const { account }: { account: string } = useWallet()\n//   const sousChefContract = useSousChef(sousId)\n\n//   const handleApprove = useCallback(async () => {\n//     try {\n//       const tx = await approve(lpContract, sousChefContract, account)\n//       dispatch(updateUserAllowance(sousId, account))\n//       return tx\n//     } catch (e) {\n//       return false\n//     }\n//   }, [account, dispatch, lpContract, sousChefContract, sousId])\n\n//   return { onApprove: handleApprove }\n// }\n\n// Approve the lottery\nexport const useLotteryApprove = () => {\n  const { account }: { account: string } = useWallet()\n  const cakeContract = useCake()\n  const lotteryContract = useLottery()\n\n  const handleApprove = useCallback(async () => {\n    try {\n      const tx = await approve(cakeContract, lotteryContract, account)\n      return tx\n    } catch (e) {\n      return false\n    }\n  }, [account, cakeContract, lotteryContract])\n\n  return { onApprove: handleApprove }\n}\n\n// Approve an IFO\nexport const useIfoApprove = (tokenContract: Contract, spenderAddress: string) => {\n  const { account } = useWallet()\n  const onApprove = useCallback(async () => {\n    try {\n      const tx = await tokenContract.methods\n        .approve(spenderAddress, ethers.constants.MaxUint256)\n        .send({ from: account })\n      return tx\n    } catch {\n      return false\n    }\n  }, [account, spenderAddress, tokenContract])\n\n  return onApprove\n}\n"]},"metadata":{},"sourceType":"module"}